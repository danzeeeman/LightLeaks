<html>
	<head>
		<script>
			let hostname = "localhost";

			fetch("/actions/cameraHostname").then((resp)=> resp.text())
			.then((_hostname)=>{
				hostname = _hostname;
				console.log("Camera hostname",hostname);
				// document.getElementById('camera').href = "http://"+hostname+":8080"
			})

			function start(){
				fetch('/actions/start').then(()=>{
					// document.getElementById('img').src = '/preview.jpg?t='+Math.random()
				});
				
			}
			function stop(){
				fetch('/actions/stop')
			}

			function preview(){
				fetch('http://'+hostname+':8080/actions/takePhoto/httpdocs/preview.jpg', {mode:'no-cors'})
				.then(()=>document.getElementById('img').src = 'http://'+hostname+':8080/preview.jpg?t='+Math.random())
			}
		</script>
	</head>
	
	<body>
	<h1>Light Leaks - ProCamSample remote</h1>
	<ul>
		<li><a href="javascript:start();">Start calibration</a></li>
		<li><a href="javascript:stop();">Stop</a></li>
		<li><a href="javascript:preview()" id="camera">Take preview</a></li>
	</ul>
	
	<img src="" id="img" alt="">
	</body>
</html>